{"ast":null,"code":"// API Service for connecting to backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\n\n// Generic fetch helper\nconst fetchAPI = async (url, options = {}) => {\n  try {\n    const headers = getAuthHeaders();\n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...options.headers\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error(`API Error (${response.status}):`, errorData.error || errorData);\n      throw new Error(errorData.error || 'API request failed');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    if (error.message.includes('Failed to fetch')) {\n      throw new Error('Cannot connect to server. Make sure the backend is running on port 5000.');\n    }\n    throw error;\n  }\n};\n\n// Memory API\nexport const memoryAPI = {\n  // Get all memories\n  getAll: async () => {\n    return fetchAPI('/memories');\n  },\n  // Create memory\n  create: async memoryData => {\n    return fetchAPI('/memories', {\n      method: 'POST',\n      body: JSON.stringify(memoryData)\n    });\n  },\n  // Update memory\n  update: async (id, memoryData) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(memoryData)\n    });\n  },\n  // Delete memory\n  delete: async id => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search memories\n  search: async query => {\n    return fetchAPI(`/memories?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Weather Absence API\nexport const weatherAbsenceAPI = {\n  // Get all absence requests (admin)\n  getAll: async () => {\n    return fetchAPI('/weather/absence');\n  },\n  // Get user's own absence requests\n  getMine: async () => {\n    return fetchAPI('/weather/absence/me');\n  },\n  // Create absence request\n  create: async absenceData => {\n    return fetchAPI('/weather/absence', {\n      method: 'POST',\n      body: JSON.stringify(absenceData)\n    });\n  },\n  // Update absence request (admin)\n  update: async (id, updateData) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData)\n    });\n  },\n  // Delete absence request\n  delete: async id => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search absence requests\n  search: async query => {\n    return fetchAPI(`/weather/absence/me?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Work Report API\nexport const workReportAPI = {\n  // Get all work reports\n  getAll: async () => {\n    return fetchAPI('/weather/reports');\n  },\n  // Create work report\n  create: async reportData => {\n    return fetchAPI('/weather/reports', {\n      method: 'POST',\n      body: JSON.stringify(reportData)\n    });\n  },\n  // Update work report\n  update: async (id, reportData) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(reportData)\n    });\n  },\n  // Delete work report\n  delete: async id => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search work reports\n  search: async query => {\n    return fetchAPI(`/weather/reports?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// User API\nexport const userAPI = {\n  // Get current user\n  getCurrent: async () => {\n    return fetchAPI('/auth/me');\n  }\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","getAuthHeaders","token","localStorage","getItem","fetchAPI","url","options","headers","response","fetch","ok","errorData","json","console","error","status","Error","data","message","includes","memoryAPI","getAll","create","memoryData","method","body","JSON","stringify","update","id","delete","search","query","encodeURIComponent","weatherAbsenceAPI","getMine","absenceData","updateData","workReportAPI","reportData","userAPI","getCurrent"],"sources":["E:/full_stack/project/weatherapp/frontend/src/services/api.js"],"sourcesContent":["// API Service for connecting to backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\n\n// Generic fetch helper\nconst fetchAPI = async (url, options = {}) => {\n  try {\n    const headers = getAuthHeaders();\n    \n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...options.headers\n      }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error(`API Error (${response.status}):`, errorData.error || errorData);\n      throw new Error(errorData.error || 'API request failed');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    if (error.message.includes('Failed to fetch')) {\n      throw new Error('Cannot connect to server. Make sure the backend is running on port 5000.');\n    }\n    throw error;\n  }\n};\n\n// Memory API\nexport const memoryAPI = {\n  // Get all memories\n  getAll: async () => {\n    return fetchAPI('/memories');\n  },\n\n  // Create memory\n  create: async (memoryData) => {\n    return fetchAPI('/memories', {\n      method: 'POST',\n      body: JSON.stringify(memoryData)\n    });\n  },\n\n  // Update memory\n  update: async (id, memoryData) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(memoryData)\n    });\n  },\n\n  // Delete memory\n  delete: async (id) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search memories\n  search: async (query) => {\n    return fetchAPI(`/memories?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Weather Absence API\nexport const weatherAbsenceAPI = {\n  // Get all absence requests (admin)\n  getAll: async () => {\n    return fetchAPI('/weather/absence');\n  },\n\n  // Get user's own absence requests\n  getMine: async () => {\n    return fetchAPI('/weather/absence/me');\n  },\n\n  // Create absence request\n  create: async (absenceData) => {\n    return fetchAPI('/weather/absence', {\n      method: 'POST',\n      body: JSON.stringify(absenceData)\n    });\n  },\n\n  // Update absence request (admin)\n  update: async (id, updateData) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData)\n    });\n  },\n\n  // Delete absence request\n  delete: async (id) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search absence requests\n  search: async (query) => {\n    return fetchAPI(`/weather/absence/me?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Work Report API\nexport const workReportAPI = {\n  // Get all work reports\n  getAll: async () => {\n    return fetchAPI('/weather/reports');\n  },\n\n  // Create work report\n  create: async (reportData) => {\n    return fetchAPI('/weather/reports', {\n      method: 'POST',\n      body: JSON.stringify(reportData)\n    });\n  },\n\n  // Update work report\n  update: async (id, reportData) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(reportData)\n    });\n  },\n\n  // Delete work report\n  delete: async (id) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search work reports\n  search: async (query) => {\n    return fetchAPI(`/weather/reports?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// User API\nexport const userAPI = {\n  // Get current user\n  getCurrent: async () => {\n    return fetchAPI('/auth/me');\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}