{"ast":null,"code":"// API Service for connecting to backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  console.log('ðŸ”‘ Auth token:', token ? `${token.substring(0, 20)}...` : 'No token found');\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\n\n// Generic fetch helper\nconst fetchAPI = async (url, options = {}) => {\n  try {\n    const headers = getAuthHeaders();\n    console.log(`ðŸŒ API Request: ${options.method || 'GET'} ${API_URL}${url}`);\n    console.log('ðŸŒ Request headers:', headers);\n    console.log('ðŸŒ Request body:', options.body);\n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...options.headers\n      }\n    });\n    console.log(`ðŸŒ API Response: ${response.status} ${response.statusText}`);\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error(`âŒ API Error (${response.status}):`, errorData.error || errorData);\n      console.error('âŒ Full error response:', errorData);\n      throw new Error(errorData.error || `API request failed with status ${response.status}`);\n    }\n    const data = await response.json();\n    console.log('âœ… API Response data:', data);\n    return data;\n  } catch (error) {\n    console.error('âŒ Fetch error:', error);\n    if (error.message.includes('Failed to fetch')) {\n      throw new Error('Cannot connect to server. Make sure the backend is running on port 5000.');\n    }\n    throw error;\n  }\n};\n\n// Memory API\nexport const memoryAPI = {\n  // Get all memories\n  getAll: async () => {\n    return fetchAPI('/memories');\n  },\n  // Create memory\n  create: async memoryData => {\n    return fetchAPI('/memories', {\n      method: 'POST',\n      body: JSON.stringify(memoryData)\n    });\n  },\n  // Update memory\n  update: async (id, memoryData) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(memoryData)\n    });\n  },\n  // Delete memory\n  delete: async id => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search memories\n  search: async query => {\n    return fetchAPI(`/memories?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Weather Absence API\nexport const weatherAbsenceAPI = {\n  // Get all absence requests (admin)\n  getAll: async () => {\n    return fetchAPI('/weather/absence');\n  },\n  // Get user's own absence requests\n  getMine: async () => {\n    return fetchAPI('/weather/absence/me');\n  },\n  // Create absence request\n  create: async absenceData => {\n    return fetchAPI('/weather/absence', {\n      method: 'POST',\n      body: JSON.stringify(absenceData)\n    });\n  },\n  // Update absence request (admin)\n  update: async (id, updateData) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData)\n    });\n  },\n  // Delete absence request\n  delete: async id => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search absence requests\n  search: async query => {\n    return fetchAPI(`/weather/absence/me?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Work Report API\nexport const workReportAPI = {\n  // Get all work reports\n  getAll: async () => {\n    return fetchAPI('/weather/reports');\n  },\n  // Create work report\n  create: async reportData => {\n    return fetchAPI('/weather/reports', {\n      method: 'POST',\n      body: JSON.stringify(reportData)\n    });\n  },\n  // Update work report\n  update: async (id, reportData) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(reportData)\n    });\n  },\n  // Delete work report\n  delete: async id => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'DELETE'\n    });\n  },\n  // Search work reports\n  search: async query => {\n    return fetchAPI(`/weather/reports?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// User API\nexport const userAPI = {\n  // Get current user\n  getCurrent: async () => {\n    return fetchAPI('/auth/me');\n  }\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","getAuthHeaders","token","localStorage","getItem","console","log","substring","fetchAPI","url","options","headers","method","body","response","fetch","status","statusText","ok","errorData","json","error","Error","data","message","includes","memoryAPI","getAll","create","memoryData","JSON","stringify","update","id","delete","search","query","encodeURIComponent","weatherAbsenceAPI","getMine","absenceData","updateData","workReportAPI","reportData","userAPI","getCurrent"],"sources":["E:/full_stack/project/weatherapp/frontend/src/services/api.js"],"sourcesContent":["// API Service for connecting to backend\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  console.log('ðŸ”‘ Auth token:', token ? `${token.substring(0, 20)}...` : 'No token found');\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\n\n// Generic fetch helper\nconst fetchAPI = async (url, options = {}) => {\n  try {\n    const headers = getAuthHeaders();\n    \n    console.log(`ðŸŒ API Request: ${options.method || 'GET'} ${API_URL}${url}`);\n    console.log('ðŸŒ Request headers:', headers);\n    console.log('ðŸŒ Request body:', options.body);\n    \n    const response = await fetch(`${API_URL}${url}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...options.headers\n      }\n    });\n\n    console.log(`ðŸŒ API Response: ${response.status} ${response.statusText}`);\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error(`âŒ API Error (${response.status}):`, errorData.error || errorData);\n      console.error('âŒ Full error response:', errorData);\n      throw new Error(errorData.error || `API request failed with status ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log('âœ… API Response data:', data);\n    return data;\n  } catch (error) {\n    console.error('âŒ Fetch error:', error);\n    if (error.message.includes('Failed to fetch')) {\n      throw new Error('Cannot connect to server. Make sure the backend is running on port 5000.');\n    }\n    throw error;\n  }\n};\n\n// Memory API\nexport const memoryAPI = {\n  // Get all memories\n  getAll: async () => {\n    return fetchAPI('/memories');\n  },\n\n  // Create memory\n  create: async (memoryData) => {\n    return fetchAPI('/memories', {\n      method: 'POST',\n      body: JSON.stringify(memoryData)\n    });\n  },\n\n  // Update memory\n  update: async (id, memoryData) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(memoryData)\n    });\n  },\n\n  // Delete memory\n  delete: async (id) => {\n    return fetchAPI(`/memories/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search memories\n  search: async (query) => {\n    return fetchAPI(`/memories?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Weather Absence API\nexport const weatherAbsenceAPI = {\n  // Get all absence requests (admin)\n  getAll: async () => {\n    return fetchAPI('/weather/absence');\n  },\n\n  // Get user's own absence requests\n  getMine: async () => {\n    return fetchAPI('/weather/absence/me');\n  },\n\n  // Create absence request\n  create: async (absenceData) => {\n    return fetchAPI('/weather/absence', {\n      method: 'POST',\n      body: JSON.stringify(absenceData)\n    });\n  },\n\n  // Update absence request (admin)\n  update: async (id, updateData) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData)\n    });\n  },\n\n  // Delete absence request\n  delete: async (id) => {\n    return fetchAPI(`/weather/absence/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search absence requests\n  search: async (query) => {\n    return fetchAPI(`/weather/absence/me?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// Work Report API\nexport const workReportAPI = {\n  // Get all work reports\n  getAll: async () => {\n    return fetchAPI('/weather/reports');\n  },\n\n  // Create work report\n  create: async (reportData) => {\n    return fetchAPI('/weather/reports', {\n      method: 'POST',\n      body: JSON.stringify(reportData)\n    });\n  },\n\n  // Update work report\n  update: async (id, reportData) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(reportData)\n    });\n  },\n\n  // Delete work report\n  delete: async (id) => {\n    return fetchAPI(`/weather/reports/${id}`, {\n      method: 'DELETE'\n    });\n  },\n\n  // Search work reports\n  search: async (query) => {\n    return fetchAPI(`/weather/reports?search=${encodeURIComponent(query)}`);\n  }\n};\n\n// User API\nexport const userAPI = {\n  // Get current user\n  getCurrent: async () => {\n    return fetchAPI('/auth/me');\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}