{"ast":null,"code":"// Live weather service using OpenWeatherMap\nconst API_KEY = process.env.REACT_APP_OPENWEATHER_API_KEY;\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5/weather';\nconst normalizeWeather = json => {\n  var _json$weather, _json$weather$, _json$weather2, _json$weather2$, _json$main, _json$main2, _json$wind;\n  const description = (json === null || json === void 0 ? void 0 : (_json$weather = json.weather) === null || _json$weather === void 0 ? void 0 : (_json$weather$ = _json$weather[0]) === null || _json$weather$ === void 0 ? void 0 : _json$weather$.description) || 'unknown';\n  const conditionMap = {\n    'clear': 'sunny',\n    'clouds': 'cloudy',\n    'few clouds': 'partly-cloudy',\n    'scattered clouds': 'partly-cloudy',\n    'broken clouds': 'cloudy',\n    'overcast clouds': 'cloudy',\n    'rain': 'rainy',\n    'drizzle': 'rainy',\n    'thunderstorm': 'stormy',\n    'snow': 'stormy',\n    'mist': 'cloudy',\n    'haze': 'cloudy',\n    'smoke': 'cloudy',\n    'dust': 'cloudy'\n  };\n  const key = ((json === null || json === void 0 ? void 0 : (_json$weather2 = json.weather) === null || _json$weather2 === void 0 ? void 0 : (_json$weather2$ = _json$weather2[0]) === null || _json$weather2$ === void 0 ? void 0 : _json$weather2$.main) || '').toLowerCase();\n  const condition = conditionMap[key] || conditionMap[description] || 'cloudy';\n  const temp = typeof (json === null || json === void 0 ? void 0 : (_json$main = json.main) === null || _json$main === void 0 ? void 0 : _json$main.temp) === 'number' ? Math.round(json.main.temp) : undefined;\n  const humidity = typeof (json === null || json === void 0 ? void 0 : (_json$main2 = json.main) === null || _json$main2 === void 0 ? void 0 : _json$main2.humidity) === 'number' ? json.main.humidity : undefined;\n  const windMs = typeof (json === null || json === void 0 ? void 0 : (_json$wind = json.wind) === null || _json$wind === void 0 ? void 0 : _json$wind.speed) === 'number' ? json.wind.speed : 0;\n  const windSpeed = Math.round(windMs * 3.6); // m/s -> km/h\n  return {\n    city: json === null || json === void 0 ? void 0 : json.name,\n    temperature: temp,\n    condition,\n    humidity,\n    windSpeed,\n    alerts: []\n  };\n};\nexport const getWeatherData = async cityName => {\n  if (!API_KEY) {\n    throw new Error('Missing OpenWeather API key. Set REACT_APP_OPENWEATHER_API_KEY.');\n  }\n  const url = `${BASE_URL}?q=${encodeURIComponent(cityName)}&appid=${API_KEY}&units=metric`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    throw new Error((err === null || err === void 0 ? void 0 : err.message) || 'Failed to fetch weather');\n  }\n  const json = await res.json();\n  return normalizeWeather(json);\n};\nexport const getWeatherByCoords = async (lat, lon) => {\n  if (!API_KEY) {\n    throw new Error('Missing OpenWeather API key. Set REACT_APP_OPENWEATHER_API_KEY.');\n  }\n  const url = `${BASE_URL}?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    throw new Error((err === null || err === void 0 ? void 0 : err.message) || 'Failed to fetch weather');\n  }\n  const json = await res.json();\n  return normalizeWeather(json);\n};\nexport const getWeatherIcon = condition => {\n  const icons = {\n    'sunny': 'â˜€ï¸',\n    'cloudy': 'â˜ï¸',\n    'partly-cloudy': 'â›…',\n    'rainy': 'ðŸŒ§ï¸',\n    'stormy': 'â›ˆï¸'\n  };\n  return icons[condition] || 'ðŸŒ¤ï¸';\n};\nexport const getWeatherDescription = condition => {\n  const descriptions = {\n    'sunny': 'Sunny',\n    'cloudy': 'Cloudy',\n    'partly-cloudy': 'Partly Cloudy',\n    'rainy': 'Rainy',\n    'stormy': 'Stormy'\n  };\n  return descriptions[condition] || 'Unknown';\n};","map":{"version":3,"names":["API_KEY","process","env","REACT_APP_OPENWEATHER_API_KEY","BASE_URL","normalizeWeather","json","_json$weather","_json$weather$","_json$weather2","_json$weather2$","_json$main","_json$main2","_json$wind","description","weather","conditionMap","key","main","toLowerCase","condition","temp","Math","round","undefined","humidity","windMs","wind","speed","windSpeed","city","name","temperature","alerts","getWeatherData","cityName","Error","url","encodeURIComponent","res","fetch","ok","err","catch","message","getWeatherByCoords","lat","lon","getWeatherIcon","icons","getWeatherDescription","descriptions"],"sources":["E:/full_stack/project/weatherapp/frontend/src/services/weatherService.js"],"sourcesContent":["// Live weather service using OpenWeatherMap\r\nconst API_KEY = process.env.REACT_APP_OPENWEATHER_API_KEY;\r\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5/weather';\r\n\r\nconst normalizeWeather = (json) => {\r\n  const description = json?.weather?.[0]?.description || 'unknown';\r\n  const conditionMap = {\r\n    'clear': 'sunny',\r\n    'clouds': 'cloudy',\r\n    'few clouds': 'partly-cloudy',\r\n    'scattered clouds': 'partly-cloudy',\r\n    'broken clouds': 'cloudy',\r\n    'overcast clouds': 'cloudy',\r\n    'rain': 'rainy',\r\n    'drizzle': 'rainy',\r\n    'thunderstorm': 'stormy',\r\n    'snow': 'stormy',\r\n    'mist': 'cloudy',\r\n    'haze': 'cloudy',\r\n    'smoke': 'cloudy',\r\n    'dust': 'cloudy'\r\n  };\r\n  const key = (json?.weather?.[0]?.main || '').toLowerCase();\r\n  const condition = conditionMap[key] || conditionMap[description] || 'cloudy';\r\n  const temp = typeof json?.main?.temp === 'number' ? Math.round(json.main.temp) : undefined;\r\n  const humidity = typeof json?.main?.humidity === 'number' ? json.main.humidity : undefined;\r\n  const windMs = typeof json?.wind?.speed === 'number' ? json.wind.speed : 0;\r\n  const windSpeed = Math.round(windMs * 3.6); // m/s -> km/h\r\n  return {\r\n    city: json?.name,\r\n    temperature: temp,\r\n    condition,\r\n    humidity,\r\n    windSpeed,\r\n    alerts: []\r\n  };\r\n};\r\n\r\nexport const getWeatherData = async (cityName) => {\r\n  if (!API_KEY) {\r\n    throw new Error('Missing OpenWeather API key. Set REACT_APP_OPENWEATHER_API_KEY.');\r\n  }\r\n  const url = `${BASE_URL}?q=${encodeURIComponent(cityName)}&appid=${API_KEY}&units=metric`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw new Error(err?.message || 'Failed to fetch weather');\r\n  }\r\n  const json = await res.json();\r\n  return normalizeWeather(json);\r\n};\r\n\r\nexport const getWeatherByCoords = async (lat, lon) => {\r\n  if (!API_KEY) {\r\n    throw new Error('Missing OpenWeather API key. Set REACT_APP_OPENWEATHER_API_KEY.');\r\n  }\r\n  const url = `${BASE_URL}?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw new Error(err?.message || 'Failed to fetch weather');\r\n  }\r\n  const json = await res.json();\r\n  return normalizeWeather(json);\r\n};\r\n\r\nexport const getWeatherIcon = (condition) => {\r\n  const icons = {\r\n    'sunny': 'â˜€ï¸',\r\n    'cloudy': 'â˜ï¸',\r\n    'partly-cloudy': 'â›…',\r\n    'rainy': 'ðŸŒ§ï¸',\r\n    'stormy': 'â›ˆï¸'\r\n  };\r\n  return icons[condition] || 'ðŸŒ¤ï¸';\r\n};\r\n\r\nexport const getWeatherDescription = (condition) => {\r\n  const descriptions = {\r\n    'sunny': 'Sunny',\r\n    'cloudy': 'Cloudy',\r\n    'partly-cloudy': 'Partly Cloudy',\r\n    'rainy': 'Rainy',\r\n    'stormy': 'Stormy'\r\n  };\r\n  return descriptions[condition] || 'Unknown';\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}