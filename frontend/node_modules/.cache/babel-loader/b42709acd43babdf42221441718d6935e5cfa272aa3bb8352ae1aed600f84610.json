{"ast":null,"code":"// Commute Service - geocoding, synthetic route generation, risk scoring using Open-Meteo (no API key)\n\nconst GEOCODE_URL = 'https://geocoding-api.open-meteo.com/v1/search';\nconst WEATHER_URL = 'https://api.open-meteo.com/v1/forecast';\nconst AIR_URL = 'https://air-quality-api.open-meteo.com/v1/air-quality';\nasync function geocode(place) {\n  const controller = new AbortController();\n  const timeout = setTimeout(() => controller.abort(), 5000);\n  const res = await fetch(`${GEOCODE_URL}?name=${encodeURIComponent(place)}&count=1&language=en`, {\n    signal: controller.signal\n  });\n  clearTimeout(timeout);\n  if (!res.ok) throw new Error(`Geocoding failed: ${res.status}`);\n  const data = await res.json();\n  const hit = data.results && data.results[0];\n  if (!hit) throw new Error(`Location not found: ${place}`);\n  return {\n    name: hit.name,\n    lat: hit.latitude,\n    lon: hit.longitude,\n    country: hit.country_code\n  };\n}\nfunction interpolateRoute(from, to, steps = 12) {\n  const points = [];\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    points.push({\n      lat: from.lat + (to.lat - from.lat) * t,\n      lon: from.lon + (to.lon - from.lon) * t\n    });\n  }\n  return points;\n}\n\n// Create multiple synthetic alternative routes (straight, slight detour north, slight detour south)\nfunction generateAlternatives(home, office) {\n  const base = interpolateRoute(home, office, 14);\n  const offset = v => v + (Math.random() * 0.06 - 0.03);\n  const north = base.map((p, i) => ({\n    lat: p.lat + (i % 5 === 0 ? 0.03 : 0),\n    lon: p.lon\n  }));\n  const south = base.map((p, i) => ({\n    lat: p.lat - (i % 5 === 0 ? 0.03 : 0),\n    lon: p.lon\n  }));\n  return [{\n    id: 'fastest',\n    label: 'Fastest (approx.)',\n    points: base\n  }, {\n    id: 'alt_north',\n    label: 'Alternative (north detour)',\n    points: north\n  }, {\n    id: 'alt_south',\n    label: 'Alternative (south detour)',\n    points: south\n  }];\n}\nasync function fetchAirWeather(lat, lon) {\n  const controller = new AbortController();\n  const timeout = setTimeout(() => controller.abort(), 8000);\n  try {\n    const [weatherRes, airRes] = await Promise.all([fetch(`${WEATHER_URL}?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,uv_index&current=temperature_2m,uv_index&timezone=auto`, {\n      signal: controller.signal\n    }), fetch(`${AIR_URL}?latitude=${lat}&longitude=${lon}&hourly=pm2_5,pm10,ozone,nitrogen_dioxide&timezone=auto`, {\n      signal: controller.signal\n    })]);\n    clearTimeout(timeout);\n    if (!weatherRes.ok) throw new Error(`Weather API error: ${weatherRes.status}`);\n    if (!airRes.ok) throw new Error(`Air Quality API error: ${airRes.status}`);\n    const weather = await weatherRes.json();\n    const air = await airRes.json();\n    return {\n      weather,\n      air\n    };\n  } catch (error) {\n    clearTimeout(timeout);\n    if (error.name === 'AbortError') {\n      throw new Error('Request timeout - please try again');\n    }\n    throw error;\n  }\n}\nfunction aqiFromPm25(pm) {\n  const ranges = [{\n    cLow: 0.0,\n    cHigh: 12.0,\n    iLow: 0,\n    iHigh: 50\n  }, {\n    cLow: 12.1,\n    cHigh: 35.4,\n    iLow: 51,\n    iHigh: 100\n  }, {\n    cLow: 35.5,\n    cHigh: 55.4,\n    iLow: 101,\n    iHigh: 150\n  }, {\n    cLow: 55.5,\n    cHigh: 150.4,\n    iLow: 151,\n    iHigh: 200\n  }, {\n    cLow: 150.5,\n    cHigh: 250.4,\n    iLow: 201,\n    iHigh: 300\n  }];\n  for (const r of ranges) {\n    if (pm >= r.cLow && pm <= r.cHigh) {\n      return Math.round((r.iHigh - r.iLow) / (r.cHigh - r.cLow) * (pm - r.cLow) + r.iLow);\n    }\n  }\n  return Math.min(400, Math.max(0, Math.round(pm)));\n}\nfunction riskColor(score) {\n  if (score <= 25) return '#10b981';\n  if (score <= 50) return '#f59e0b';\n  if (score <= 75) return '#ef4444';\n  return '#991b1b';\n}\n\n// Compute a risk score for a point given air/weather and user preferences\nfunction scorePoint({\n  pm25 = 10,\n  uv = 2,\n  temp = 18\n}, prefs) {\n  const aqi = aqiFromPm25(pm25);\n  const pollutionWeight = prefs.pollutionSensitivity || 1.0;\n  const uvWeight = prefs.uvSensitivity || 0.7;\n  const tempWeight = prefs.temperatureSensitivity || 0.5;\n  const aqiScore = Math.min(100, aqi);\n  const uvScore = Math.min(100, uv * 10);\n  const tempScore = Math.min(100, Math.abs(temp - 20) * 5);\n  const combined = (aqiScore * pollutionWeight + uvScore * uvWeight + tempScore * tempWeight) / (pollutionWeight + uvWeight + tempWeight);\n  return Math.round(combined);\n}\nexport async function planCommute({\n  home,\n  office,\n  departureWindow,\n  prefs\n}) {\n  // 1) Geocode\n  const [homeGeo, officeGeo] = await Promise.all([geocode(home), geocode(office)]);\n\n  // 2) Build alternatives (synthetic paths)\n  const alternatives = generateAlternatives(homeGeo, officeGeo);\n\n  // 3) For each route, sample a subset of points and fetch air/weather at mid-point (lightweight)\n  const results = await Promise.all(alternatives.map(async route => {\n    const mid = route.points[Math.floor(route.points.length / 2)];\n    try {\n      var _air$hourly$pm2_5$hou, _air$hourly, _air$hourly$pm2_, _weather$hourly$uv_in, _weather$hourly, _weather$hourly$uv_in2, _ref, _weather$current$temp, _weather$current, _weather$hourly2, _weather$hourly2$temp;\n      const {\n        weather,\n        air\n      } = await fetchAirWeather(mid.lat, mid.lon);\n      // Extract representative metrics for scoring\n      const hourIdx = 0;\n      const pm25 = (_air$hourly$pm2_5$hou = (_air$hourly = air.hourly) === null || _air$hourly === void 0 ? void 0 : (_air$hourly$pm2_ = _air$hourly.pm2_5) === null || _air$hourly$pm2_ === void 0 ? void 0 : _air$hourly$pm2_[hourIdx]) !== null && _air$hourly$pm2_5$hou !== void 0 ? _air$hourly$pm2_5$hou : 10;\n      const uv = (_weather$hourly$uv_in = (_weather$hourly = weather.hourly) === null || _weather$hourly === void 0 ? void 0 : (_weather$hourly$uv_in2 = _weather$hourly.uv_index) === null || _weather$hourly$uv_in2 === void 0 ? void 0 : _weather$hourly$uv_in2[hourIdx]) !== null && _weather$hourly$uv_in !== void 0 ? _weather$hourly$uv_in : 2;\n      const temp = (_ref = (_weather$current$temp = (_weather$current = weather.current) === null || _weather$current === void 0 ? void 0 : _weather$current.temperature_2m) !== null && _weather$current$temp !== void 0 ? _weather$current$temp : (_weather$hourly2 = weather.hourly) === null || _weather$hourly2 === void 0 ? void 0 : (_weather$hourly2$temp = _weather$hourly2.temperature_2m) === null || _weather$hourly2$temp === void 0 ? void 0 : _weather$hourly2$temp[hourIdx]) !== null && _ref !== void 0 ? _ref : 18;\n      const score = scorePoint({\n        pm25,\n        uv,\n        temp\n      }, prefs);\n      const hazards = [];\n      if (aqiFromPm25(pm25) > 100) hazards.push({\n        type: 'air',\n        level: 'moderate',\n        message: 'Elevated AQI along route'\n      });\n      if (uv > 7) hazards.push({\n        type: 'uv',\n        level: 'high',\n        message: 'High UV during travel'\n      });\n      if (temp < 5) hazards.push({\n        type: 'cold',\n        level: 'medium',\n        message: 'Cold temperatures expected'\n      });\n      if (temp > 32) hazards.push({\n        type: 'heat',\n        level: 'high',\n        message: 'Heat risk during travel'\n      });\n      return {\n        ...route,\n        riskScore: score,\n        color: riskColor(score),\n        summary: {\n          pm25,\n          uv,\n          temp\n        },\n        hazards\n      };\n    } catch (e) {\n      return {\n        ...route,\n        riskScore: 60,\n        color: riskColor(60),\n        summary: {},\n        hazards: [{\n          type: 'data',\n          level: 'low',\n          message: 'Using fallback risk due to API issue'\n        }]\n      };\n    }\n  }));\n\n  // 4) Recommend safest route & best window (simple pick lowest score)\n  const bestRoute = results.reduce((min, r) => r.riskScore < min.riskScore ? r : min, results[0]);\n  const advice = [];\n  if (bestRoute.summary.uv > 7) advice.push('Use sunscreen and wear a hat');\n  if (aqiFromPm25(bestRoute.summary.pm25) > 100) advice.push('Consider a mask if sensitive to pollution');\n  if (bestRoute.summary.temp < 8) advice.push('Dress warmly, consider gloves');\n  if (bestRoute.summary.temp > 30) advice.push('Hydrate and avoid peak heat hours');\n  return {\n    home: homeGeo,\n    office: officeGeo,\n    routes: results.sort((a, b) => a.riskScore - b.riskScore),\n    recommendation: {\n      routeId: bestRoute.id,\n      advice\n    }\n  };\n}\nexport function riskLegend() {\n  return [{\n    label: 'Low',\n    color: '#10b981'\n  }, {\n    label: 'Moderate',\n    color: '#f59e0b'\n  }, {\n    label: 'High',\n    color: '#ef4444'\n  }, {\n    label: 'Severe',\n    color: '#991b1b'\n  }];\n}","map":{"version":3,"names":["GEOCODE_URL","WEATHER_URL","AIR_URL","geocode","place","controller","AbortController","timeout","setTimeout","abort","res","fetch","encodeURIComponent","signal","clearTimeout","ok","Error","status","data","json","hit","results","name","lat","latitude","lon","longitude","country","country_code","interpolateRoute","from","to","steps","points","i","t","push","generateAlternatives","home","office","base","offset","v","Math","random","north","map","p","south","id","label","fetchAirWeather","weatherRes","airRes","Promise","all","weather","air","error","aqiFromPm25","pm","ranges","cLow","cHigh","iLow","iHigh","r","round","min","max","riskColor","score","scorePoint","pm25","uv","temp","prefs","aqi","pollutionWeight","pollutionSensitivity","uvWeight","uvSensitivity","tempWeight","temperatureSensitivity","aqiScore","uvScore","tempScore","abs","combined","planCommute","departureWindow","homeGeo","officeGeo","alternatives","route","mid","floor","length","_air$hourly$pm2_5$hou","_air$hourly","_air$hourly$pm2_","_weather$hourly$uv_in","_weather$hourly","_weather$hourly$uv_in2","_ref","_weather$current$temp","_weather$current","_weather$hourly2","_weather$hourly2$temp","hourIdx","hourly","pm2_5","uv_index","current","temperature_2m","hazards","type","level","message","riskScore","color","summary","e","bestRoute","reduce","advice","routes","sort","a","b","recommendation","routeId","riskLegend"],"sources":["E:/full_stack/project/weatherapp/frontend/src/services/commuteService.js"],"sourcesContent":["// Commute Service - geocoding, synthetic route generation, risk scoring using Open-Meteo (no API key)\r\n\r\nconst GEOCODE_URL = 'https://geocoding-api.open-meteo.com/v1/search';\r\nconst WEATHER_URL = 'https://api.open-meteo.com/v1/forecast';\r\nconst AIR_URL = 'https://air-quality-api.open-meteo.com/v1/air-quality';\r\n\r\nasync function geocode(place) {\r\n  const controller = new AbortController();\r\n  const timeout = setTimeout(() => controller.abort(), 5000);\r\n  const res = await fetch(`${GEOCODE_URL}?name=${encodeURIComponent(place)}&count=1&language=en`, { signal: controller.signal });\r\n  clearTimeout(timeout);\r\n  if (!res.ok) throw new Error(`Geocoding failed: ${res.status}`);\r\n  const data = await res.json();\r\n  const hit = data.results && data.results[0];\r\n  if (!hit) throw new Error(`Location not found: ${place}`);\r\n  return { name: hit.name, lat: hit.latitude, lon: hit.longitude, country: hit.country_code };\r\n}\r\n\r\nfunction interpolateRoute(from, to, steps = 12) {\r\n  const points = [];\r\n  for (let i = 0; i <= steps; i++) {\r\n    const t = i / steps;\r\n    points.push({\r\n      lat: from.lat + (to.lat - from.lat) * t,\r\n      lon: from.lon + (to.lon - from.lon) * t\r\n    });\r\n  }\r\n  return points;\r\n}\r\n\r\n// Create multiple synthetic alternative routes (straight, slight detour north, slight detour south)\r\nfunction generateAlternatives(home, office) {\r\n  const base = interpolateRoute(home, office, 14);\r\n  const offset = (v) => v + (Math.random() * 0.06 - 0.03);\r\n\r\n  const north = base.map((p, i) => ({ lat: p.lat + (i % 5 === 0 ? 0.03 : 0), lon: p.lon }));\r\n  const south = base.map((p, i) => ({ lat: p.lat - (i % 5 === 0 ? 0.03 : 0), lon: p.lon }));\r\n\r\n  return [\r\n    { id: 'fastest', label: 'Fastest (approx.)', points: base },\r\n    { id: 'alt_north', label: 'Alternative (north detour)', points: north },\r\n    { id: 'alt_south', label: 'Alternative (south detour)', points: south }\r\n  ];\r\n}\r\n\r\nasync function fetchAirWeather(lat, lon) {\r\n  const controller = new AbortController();\r\n  const timeout = setTimeout(() => controller.abort(), 8000);\r\n  \r\n  try {\r\n    const [weatherRes, airRes] = await Promise.all([\r\n      fetch(`${WEATHER_URL}?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,uv_index&current=temperature_2m,uv_index&timezone=auto`, { signal: controller.signal }),\r\n      fetch(`${AIR_URL}?latitude=${lat}&longitude=${lon}&hourly=pm2_5,pm10,ozone,nitrogen_dioxide&timezone=auto`, { signal: controller.signal })\r\n    ]);\r\n    clearTimeout(timeout);\r\n    \r\n    if (!weatherRes.ok) throw new Error(`Weather API error: ${weatherRes.status}`);\r\n    if (!airRes.ok) throw new Error(`Air Quality API error: ${airRes.status}`);\r\n    \r\n    const weather = await weatherRes.json();\r\n    const air = await airRes.json();\r\n    return { weather, air };\r\n  } catch (error) {\r\n    clearTimeout(timeout);\r\n    if (error.name === 'AbortError') {\r\n      throw new Error('Request timeout - please try again');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\nfunction aqiFromPm25(pm) {\r\n  const ranges = [\r\n    { cLow: 0.0, cHigh: 12.0, iLow: 0, iHigh: 50 },\r\n    { cLow: 12.1, cHigh: 35.4, iLow: 51, iHigh: 100 },\r\n    { cLow: 35.5, cHigh: 55.4, iLow: 101, iHigh: 150 },\r\n    { cLow: 55.5, cHigh: 150.4, iLow: 151, iHigh: 200 },\r\n    { cLow: 150.5, cHigh: 250.4, iLow: 201, iHigh: 300 }\r\n  ];\r\n  for (const r of ranges) {\r\n    if (pm >= r.cLow && pm <= r.cHigh) {\r\n      return Math.round(((r.iHigh - r.iLow) / (r.cHigh - r.cLow)) * (pm - r.cLow) + r.iLow);\r\n    }\r\n  }\r\n  return Math.min(400, Math.max(0, Math.round(pm)));\r\n}\r\n\r\nfunction riskColor(score) {\r\n  if (score <= 25) return '#10b981';\r\n  if (score <= 50) return '#f59e0b';\r\n  if (score <= 75) return '#ef4444';\r\n  return '#991b1b';\r\n}\r\n\r\n// Compute a risk score for a point given air/weather and user preferences\r\nfunction scorePoint({ pm25 = 10, uv = 2, temp = 18 }, prefs) {\r\n  const aqi = aqiFromPm25(pm25);\r\n  const pollutionWeight = prefs.pollutionSensitivity || 1.0;\r\n  const uvWeight = prefs.uvSensitivity || 0.7;\r\n  const tempWeight = prefs.temperatureSensitivity || 0.5;\r\n\r\n  const aqiScore = Math.min(100, aqi);\r\n  const uvScore = Math.min(100, uv * 10);\r\n  const tempScore = Math.min(100, Math.abs(temp - 20) * 5);\r\n\r\n  const combined = (aqiScore * pollutionWeight + uvScore * uvWeight + tempScore * tempWeight) / (pollutionWeight + uvWeight + tempWeight);\r\n  return Math.round(combined);\r\n}\r\n\r\nexport async function planCommute({ home, office, departureWindow, prefs }) {\r\n  // 1) Geocode\r\n  const [homeGeo, officeGeo] = await Promise.all([geocode(home), geocode(office)]);\r\n\r\n  // 2) Build alternatives (synthetic paths)\r\n  const alternatives = generateAlternatives(homeGeo, officeGeo);\r\n\r\n  // 3) For each route, sample a subset of points and fetch air/weather at mid-point (lightweight)\r\n  const results = await Promise.all(alternatives.map(async (route) => {\r\n    const mid = route.points[Math.floor(route.points.length / 2)];\r\n    try {\r\n      const { weather, air } = await fetchAirWeather(mid.lat, mid.lon);\r\n      // Extract representative metrics for scoring\r\n      const hourIdx = 0;\r\n      const pm25 = air.hourly?.pm2_5?.[hourIdx] ?? 10;\r\n      const uv = weather.hourly?.uv_index?.[hourIdx] ?? 2;\r\n      const temp = weather.current?.temperature_2m ?? weather.hourly?.temperature_2m?.[hourIdx] ?? 18;\r\n      const score = scorePoint({ pm25, uv, temp }, prefs);\r\n\r\n      const hazards = [];\r\n      if (aqiFromPm25(pm25) > 100) hazards.push({ type: 'air', level: 'moderate', message: 'Elevated AQI along route' });\r\n      if (uv > 7) hazards.push({ type: 'uv', level: 'high', message: 'High UV during travel' });\r\n      if (temp < 5) hazards.push({ type: 'cold', level: 'medium', message: 'Cold temperatures expected' });\r\n      if (temp > 32) hazards.push({ type: 'heat', level: 'high', message: 'Heat risk during travel' });\r\n\r\n      return { ...route, riskScore: score, color: riskColor(score), summary: { pm25, uv, temp }, hazards };\r\n    } catch (e) {\r\n      return { ...route, riskScore: 60, color: riskColor(60), summary: {}, hazards: [{ type: 'data', level: 'low', message: 'Using fallback risk due to API issue' }] };\r\n    }\r\n  }));\r\n\r\n  // 4) Recommend safest route & best window (simple pick lowest score)\r\n  const bestRoute = results.reduce((min, r) => (r.riskScore < min.riskScore ? r : min), results[0]);\r\n\r\n  const advice = [];\r\n  if (bestRoute.summary.uv > 7) advice.push('Use sunscreen and wear a hat');\r\n  if (aqiFromPm25(bestRoute.summary.pm25) > 100) advice.push('Consider a mask if sensitive to pollution');\r\n  if (bestRoute.summary.temp < 8) advice.push('Dress warmly, consider gloves');\r\n  if (bestRoute.summary.temp > 30) advice.push('Hydrate and avoid peak heat hours');\r\n\r\n  return {\r\n    home: homeGeo,\r\n    office: officeGeo,\r\n    routes: results.sort((a, b) => a.riskScore - b.riskScore),\r\n    recommendation: { routeId: bestRoute.id, advice }\r\n  };\r\n}\r\n\r\nexport function riskLegend() {\r\n  return [\r\n    { label: 'Low', color: '#10b981' },\r\n    { label: 'Moderate', color: '#f59e0b' },\r\n    { label: 'High', color: '#ef4444' },\r\n    { label: 'Severe', color: '#991b1b' }\r\n  ];\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}